(this.webpackJsonpepic=this.webpackJsonpepic||[]).push([[13],{272:function(e,t,n){"use strict";n.r(t);var r,c,i,l,s=n(0),a=n(76),j=n(257),d=n(29),u=n(74),b=n(16),h=n(268),o=n(96),g=n(151),O=n(278),x=n(30),p=n(4),f=x.a.img(r||(r=Object(d.a)(["\n  max-width: 300px;\n"]))),m=x.a.div(c||(c=Object(d.a)(["\n  margin-top: 30px;\n  border: 2px dashed #ccc;\n  padding: 20px;\n"]))),v=x.a.h1(i||(i=Object(d.a)(["\n  margin: 20px 0;\n  text-align: center;\n"]))),w=h.a.Dragger,F=Object(a.a)((function(){var e=Object(u.a)(),t=e.ImageStore,n=e.UserStore,r=Object(s.useRef)(),c=Object(s.useRef)(),i=Object(b.d)((function(){return{width:null,setWidth:function(e){i.width=e},get widthStr(){return i.width?"/w/".concat(i.width):""},height:null,setHeight:function(e){i.height=e},get heightStr(){return i.height?"/h/".concat(i.height):""},get fullStr(){return t.serverFile.attributes.url.attributes.url+"?imageView2/0"+i.widthStr+i.heightStr}}})),l={beforeUpload:function(e){return t.setFile(e),t.setFileName(e.name),null==n.currentUser?(o.b.warning("\u8bf7\u5148\u767b\u5f55\u518d\u4e0a\u4f20"),!1):e.size>=1024e3?(o.b.error("\u8bf7\u4e0a\u4f20\u5927\u5c0f\u4e0d\u8d85\u8fc71024KB\u7684\u56fe\u7247"),!1):(t.upLoad().then((function(e){console.log(e),o.b.success("\u4e0a\u4f20\u6210\u529f"),console.log("\u4e0a\u4f20\u6210\u529f")})).catch((function(e){console.log(e),o.b.error("\u4e0a\u4f20\u5931\u8d25"),console.log("\u4e0a\u4f20\u5931\u8d25")})).finally((function(){t.isUploading=!1,console.log("\u4e0a\u4f20\u5b8c\u6210")})),!1)}};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(g.a,{tip:"\u4e0a\u4f20\u4e2d",spinning:t.isUploading,children:Object(p.jsxs)(w,Object(j.a)(Object(j.a)({},l),{},{children:[Object(p.jsx)("p",{className:"ant-upload-drag-icon",children:Object(p.jsx)(O.a,{})}),Object(p.jsx)("p",{className:"ant-upload-text",children:"\u70b9\u51fb\u6216\u8005\u62d6\u62fd\u4e0a\u4f20\u5730\u56fe"}),Object(p.jsx)("p",{className:"ant-upload-hint",children:"\u4ec5\u652f\u6301jpg\u3001jpeg\u3001bmp\u3001svg\u3001png\u683c\u5f0f\u7684\u56fe\u7247\uff0c\u540c\u65f6\u4e0d\u8d85\u8fc71024KB\u5927\u5c0f"})]}))}),t.serverFile?Object(p.jsxs)(m,{children:[Object(p.jsx)(v,{children:"\u4e0a\u4f20\u7ed3\u679c"}),Object(p.jsx)("div",{children:Object(p.jsxs)("dl",{children:[Object(p.jsx)("dt",{children:"\u5730\u56fe\u7ebf\u4e0a\u5730\u5740"}),Object(p.jsx)("dd",{children:Object(p.jsx)("a",{target:"_self",href:t.serverFile.attributes.url.attributes.url,children:t.serverFile.attributes.url.attributes.url})}),Object(p.jsx)("dt",{children:"\u6587\u4ef6\u540d"}),Object(p.jsx)("dd",{children:t.fileName}),Object(p.jsx)("dt",{children:"\u5730\u56fe\u9884\u89c8"}),Object(p.jsx)("dd",{children:Object(p.jsx)(f,{alt:"\u52a0\u8f7d\u5931\u8d25",src:t.serverFile.attributes.url.attributes.url})}),Object(p.jsx)("dt",{children:"\u66f4\u591a\u5c3a\u5bf8"}),Object(p.jsxs)("dd",{children:[Object(p.jsx)("input",{ref:r,onChange:function(){i.setWidth(r.current.value)},placeholder:"\u6700\u5927\u5bbd\u5ea6\uff08\u53ef\u9009\uff09"}),Object(p.jsx)("input",{ref:c,onChange:function(){i.setHeight(c.current.value)},placeholder:"\u6700\u5927\u9ad8\u5ea6\uff08\u53ef\u9009\uff09"})]}),Object(p.jsx)("dd",{children:Object(p.jsx)("a",{target:"_blank",href:i.fullStr,children:i.fullStr})})]})})]}):null]})})),S=x.a.div(l||(l=Object(d.a)(["\n  background: orange;\n  color: #fff;\n  padding: 10px;\n  margin: 30px 0;\n  font-size: 14px;\n  border-radius: 5px;\n"]))),U=Object(a.a)((function(e){var t=e.children,n=Object(u.a)().UserStore;return Object(p.jsx)(p.Fragment,{children:n.currentUser?null:Object(p.jsx)(S,{children:t})})})),N=Object(a.a)((function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(U,{children:"\u8bf7\u5148\u767b\u5f55\u518d\u4e0a\u4f20 \uff01\uff01\uff01"}),Object(p.jsx)(F,{})]})}));t.default=N}}]);
//# sourceMappingURL=13.db7576c7.chunk.js.map